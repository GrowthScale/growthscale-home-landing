#!/bin/bash

echo "üîß VERIFICA√á√ÉO DA CONFIGURA√á√ÉO DO SUPABASE"
echo "=========================================="

echo ""
echo "üìã PROBLEMA IDENTIFICADO:"
echo "O redirecionamento para localhost:3000 indica configura√ß√£o incorreta"
echo ""

echo "üéØ SOLU√á√ÉO NECESS√ÅRIA:"
echo ""

echo "1Ô∏è‚É£ CONFIGURAR SUPABASE DASHBOARD:"
echo "   - V√° para: https://supabase.com/dashboard"
echo "   - Selecione seu projeto"
echo "   - Authentication > URL Configuration"
echo "   - Site URL: https://growthscale-home-landing.vercel.app"
echo "   - Redirect URLs:"
echo "     * https://growthscale-home-landing.vercel.app/auth/callback"
echo "     * https://growthscale-home-landing.vercel.app/auth"
echo "     * http://localhost:3000/auth/callback"
echo "     * http://localhost:3000/auth"
echo ""

echo "2Ô∏è‚É£ CONFIGURAR VERCEL DASHBOARD:"
echo "   - V√° para: https://vercel.com/dashboard"
echo "   - Selecione: growthscale-home-landing"
echo "   - Settings > Environment Variables"
echo "   - Adicione:"
echo "     * VITE_SITE_URL = https://growthscale-home-landing.vercel.app"
echo "     * VITE_SUPABASE_URL = [sua-url-do-supabase]"
echo "     * VITE_SUPABASE_ANON_KEY = [sua-chave-anonima]"
echo ""

echo "3Ô∏è‚É£ VERIFICAR EMAIL TEMPLATES:"
echo "   - Supabase Dashboard > Authentication > Email Templates"
echo "   - Template: Confirm signup"
echo "   - Verificar se o link est√° correto"
echo ""

echo "4Ô∏è‚É£ VERIFICAR PROVIDERS:"
echo "   - Supabase Dashboard > Authentication > Providers"
echo "   - Email deve estar ativado"
echo "   - Confirm email deve estar ativado"
echo ""

echo "üîç VERIFICA√á√ÉO NO NAVEGADOR:"
echo ""

echo "Abra o console do navegador e execute:"
echo "console.log('VITE_SITE_URL:', import.meta.env.VITE_SITE_URL);"
echo "console.log('VITE_SUPABASE_URL:', import.meta.env.VITE_SUPABASE_URL);"
echo ""

echo "‚úÖ RESULTADO ESPERADO:"
echo "VITE_SITE_URL: https://growthscale-home-landing.vercel.app"
echo "VITE_SUPABASE_URL: https://[seu-projeto].supabase.co"
echo ""

echo "‚ùå SE MOSTRAR 'undefined':"
echo "- As vari√°veis n√£o est√£o configuradas no Vercel"
echo "- Fa√ßa um novo deploy ap√≥s configurar"
echo ""

echo "üöÄ AP√ìS CONFIGURAR:"
echo "1. Fa√ßa um novo deploy: vercel --prod"
echo "2. Teste o cadastro novamente"
echo "3. Verifique se o email chega com link correto"
echo "4. Confirme se o redirecionamento funciona"
echo ""

echo "üìû SE AINDA HOUVER PROBLEMAS:"
echo "1. Verifique os logs do console"
echo "2. Confirme a configura√ß√£o do Supabase"
echo "3. Teste em modo inc√≥gnito"
echo "4. Verifique se n√£o h√° cache do navegador"
echo ""
